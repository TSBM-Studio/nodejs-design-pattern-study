# ì „ëžµ íŒ¨í„´ vs íŒ©í† ë¦¬ íŒ¨í„´ vs í…œí”Œë¦¿ ë©”ì„œë“œ íŒ¨í„´

ì„¸ íŒ¨í„´ ëª¨ë‘ **"ìƒí™©ì— ë”°ë¼ ë‹¤ë¥¸ ë¡œì§ì„ ìˆ˜í–‰í•œë‹¤"**ëŠ” ê²°ê³¼ì ì¸ ê³µí†µì ì´ ìžˆì–´ í˜¼ë™í•˜ê¸° ì‰½ìŒ.
í•˜ì§€ë§Œ **"ë¬´ì—‡ì„ í•´ê²°í•˜ë ¤ëŠ”ê°€(ì˜ë„)"**ì™€ **"ì–´ë–»ê²Œ êµ¬í˜„í•˜ëŠ”ê°€(êµ¬ì¡°)"**ì—ì„œ ëª…í™•í•œ ì°¨ì´ê°€ ì¡´ìž¬í•¨.

---

## 1. í•µì‹¬ ì˜ë„(Intent) ë¹„êµ

| êµ¬ë¶„          | Factory Pattern                | Strategy Pattern                         | Template Method Pattern                    |
| :------------ | :----------------------------- | :--------------------------------------- | :----------------------------------------- |
| **ìœ í˜•**      | **ìƒì„± íŒ¨í„´** (Creational)     | **í–‰ìœ„ íŒ¨í„´** (Behavioral)               | **í–‰ìœ„ íŒ¨í„´** (Behavioral)                 |
| **í•µì‹¬ ì§ˆë¬¸** | "ëˆ„ê°€/ë¬´ì—‡ì„ **ë§Œë“¤** ê²ƒì¸ê°€?" | "ì–´ë–¤ **ë°©ë²•(ì•Œê³ ë¦¬ì¦˜)**ìœ¼ë¡œ í•  ê²ƒì¸ê°€?" | "ì–´ë–¤ **ìˆœì„œ/ë‹¨ê³„**ë¡œ í•  ê²ƒì¸ê°€?"          |
| **í•´ê²° ë°©ì‹** | ê°ì²´ ìƒì„± ë¡œì§ ìº¡ìŠí™”          | ê°ì²´ **í•©ì„±(Composition)** ë° ìœ„ìž„       | í´ëž˜ìŠ¤ **ìƒì†(Inheritance)** ë° ì˜¤ë²„ë¼ì´ë”© |
| **ìœ ì—°ì„±**    | ê°ì²´ ìƒì„±ì˜ ìœ ì—°ì„±             | ëŸ°íƒ€ìž„ ë¡œì§ êµì²´ì˜ ìœ ì—°ì„±                | ì½”ë“œ ìž¬ì‚¬ìš© ë° êµ¬ì¡° ê°•ì œ                   |

---

## 2. Strategy vs Template Method (êµ¬ì¡°ì  ì°¨ì´)

ê°€ìž¥ ë§Žì´ ë¹„êµë˜ëŠ” ë‘ í–‰ìœ„ íŒ¨í„´ìœ¼ë¡œ, **"ì•Œê³ ë¦¬ì¦˜ì„ ë³€ê²½í•˜ëŠ” ë°©ë²•"**ì´ ë‹¤ë¦„.

### 2.1 Strategy (ì „ëžµ) -> "ì¡°ë¦½(Composition)"

- **ë‚¨ì´ ë§Œë“  ë¶€í’ˆì„ ê°ˆì•„ ë¼ìš°ëŠ” ë°©ì‹.**
- ì¸í„°íŽ˜ì´ìŠ¤ë¥¼ í†µí•´ ìœ„ìž„í•˜ë¯€ë¡œ ê²°í•©ë„ê°€ ë‚®ìŒ.
- **ì‹¤í–‰ ì¤‘(Runtime)**ì— `Aì „ëžµ`ì—ì„œ `Bì „ëžµ`ìœ¼ë¡œ ì¦‰ì‹œ ë³€ê²½ ê°€ëŠ¥.
- **NestJS ì˜ˆì‹œ**: `PassportStrategy` (JWT â†” Local â†” OAuth ë“± ì¸ì¦ ë°©ì‹ êµì²´).

### 2.2 Template Method (í…œí”Œë¦¿) -> "ìƒì†(Inheritance)"

- **ë¶€ëª¨ê°€ ì •í•´ì¤€ í‹€ ì•ˆì—ì„œ ë¹ˆì¹¸(Hook) ì±„ìš°ê¸°.**
- "ì•Œê³ ë¦¬ì¦˜ì˜ ë¼ˆëŒ€"ëŠ” ë¶€ëª¨ê°€ í†µì œí•˜ê³ , ìžì‹ì€ ì„¸ë¶€ êµ¬í˜„ë§Œ ë‹´ë‹¹.
- ì»´íŒŒì¼ ì‹œì (í´ëž˜ìŠ¤ ì •ì˜)ì— ê²°ì •ë˜ë¯€ë¡œ ëŸ°íƒ€ìž„ êµì²´ëŠ” ë¶ˆê°€ëŠ¥.
- **NestJS ì˜ˆì‹œ**: `BaseService` ë“±ì—ì„œ ê³µí†µ ë¡œì§(ë¡œê¹…, íŠ¸ëžœìž­ì…˜)ì„ ìž¡ê³  `doAction()`ë§Œ ìžì‹ì´ êµ¬í˜„.

> **ðŸ’¡ íŒë‹¨ ê¸°ì¤€**
>
> - ì•Œê³ ë¦¬ì¦˜ ì „ì²´ë¥¼ ëŸ°íƒ€ìž„ì— ë°”ê¾¸ê³  ì‹¶ë‹¤? -> **Strategy**
> - ì•Œê³ ë¦¬ì¦˜ êµ¬ì¡°ëŠ” ê³ ì •í•˜ê³  ì¼ë¶€ ë‹¨ê³„ë§Œ ë°”ê¾¸ê³  ì‹¶ë‹¤? -> **Template Method**

---

## 3. Strategy vs Factory (í˜‘ë ¥ ê´€ê³„)

ì´ ë‘˜ì€ ê²½ìŸ ê´€ê³„ê°€ ì•„ë‹ˆë¼ ì„œë¡œë¥¼ ë³´ì™„í•˜ëŠ” **í˜‘ë ¥ ê´€ê³„**ì¼ ë•Œê°€ ë§ŽìŒ.

- **Factory**: "ì¡°ê±´ì— ë§žëŠ” ì „ëžµ ê°ì²´ë¥¼ **ìƒì„±**í•´ì£¼ëŠ” ì—­í• "
- **Strategy**: "ìƒì„±ëœ ê°ì²´ë¥¼ ì£¼ìž…ë°›ì•„ **ì‹¤í–‰**í•˜ëŠ” ì—­í• "

```javascript
// [Factory] ì¡°ê±´ì— ë§žëŠ” ì „ëžµì„ "ìƒì„±"
const strategy = StrategyFactory.create(userType);

// [Strategy] ìƒì„±ëœ ì „ëžµì„ ì£¼ìž…ë°›ì•„ "ì‹¤í–‰"
context.setStrategy(strategy);
context.execute();
```

---

## 4. ì„¸ íŒ¨í„´ì´ í•¨ê»˜ ì“°ì´ëŠ” ì‹œë‚˜ë¦¬ì˜¤ (Payment System)

ì„¸ íŒ¨í„´ì´ ê²°í•©ë˜ì—ˆì„ ë•Œ ê°€ìž¥ ê°•ë ¥í•œ ìœ ì—°ì„±ì„ ë°œíœ˜í•¨.

1.  **Template Method**: ê²°ì œ ì²˜ë¦¬ì˜ ì „ì²´ íŒŒì´í”„ë¼ì¸ ì •ì˜ (`ê²€ì¦` -> `ê²°ì œ` -> `ì•Œë¦¼`)
2.  **Factory**: ì‚¬ìš©ìžì˜ ì„ íƒ(Card vs PayPal)ì— ë”°ë¼ ì ì ˆí•œ `PaymentStrategy` ìƒì„±
3.  **Strategy**: ì‹¤ì œ ê²°ì œ ìŠ¹ì¸(PGì‚¬ ì—°ë™) ë¡œì§ ìˆ˜í–‰

```javascript
class PaymentProcessor {
  // Template Method: ì „ì²´ íë¦„ ì œì–´
  async process(type, amount) {
    this.validate(amount);

    // Factory: ì ì ˆí•œ ì „ëžµ ìƒì„±
    const strategy = PaymentFactory.create(type);

    // Strategy: ì‹¤ì œ ë¡œì§ ìœ„ìž„
    await strategy.pay(amount);

    this.notify();
  }
}
```

---

## 5. ê²°ë¡ 

ë¬´ì¡°ê±´ì ì¸ íŒ¨í„´ ì ìš©ë³´ë‹¤ëŠ” **"ë³€ê²½ì˜ ì¶•"**ì´ ì–´ë””ì— ìžˆëŠ”ì§€ íŒŒì•…í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•¨.

- **ê°ì²´ ìƒì„±**ì´ ë³µìž¡í•˜ê³  ë³€ê²½ì´ ìž¦ë‹¤ë©´ -> **Factory**
- **ë¡œì§(ì•Œê³ ë¦¬ì¦˜)**ì„ í†µì§¸ë¡œ ëŸ°íƒ€ìž„ì— êµì²´í•´ì•¼ í•œë‹¤ë©´ -> **Strategy**
- **ì „ì²´ íë¦„**ì€ ê°™ê³  ì„¸ë¶€ ë‹¨ê³„ë§Œ ì¡°ê¸ˆì”© ë‹¤ë¥´ë‹¤ë©´ -> **Template Method**
